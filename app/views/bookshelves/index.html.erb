<div class="container">
  <div class="row justify-content-center">
    <div class="col-12">
      <button id="myBtn" title="Go to top">Up</button>
      <h1 class="text-center"><%= current_user.username.capitalize %>'s Bookshelves</h1>
      <p class="text-right"><%= link_to 'Add a bookshelf', "bookshelves/new" %></p>
      <% if @bookshelves.empty? %>

      <h5 class="text-center">You have not created any bookshelves yet.</h5>

      <% else %>
      <% @bookshelves.each do |bookshelf| %>
        <ul class="container">
        <li class="list-group-item"><strong><%=link_to bookshelf.name.capitalize, bookshelf %></strong>
         <!-- start counter books -->
         <% if bookshelf.bookshelf_item_ids.length == 1 %>
         <%= "(1 book)" %>
         <% else %>
          <%= "(#{bookshelf.bookshelf_item_ids.length} books)" %>
         <% end %>
         <!-- end counter books -->
          <!-- calculation for progress-bar -->
          <% if bookshelf.bookshelf_item_ids.length > 0 %>
          <% count = 0 %>
          <% bookshelf.bookshelf_item_ids.each do |id| %>
            <% item = BookshelfItem.find(id) %>
            <% if item.status == 'completed' %>
            <% count += 1 %>
            <% end %>
          <% end %>
          <% calc = ((count.to_f / bookshelf.bookshelf_item_ids.length) * 100).to_f.floor(0) %>
          <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: <%= calc %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= calc %>%</div>
          </div>
          <% end %>
          <!-- end progress-bar -->
        <p class="text-right"><small><%= link_to 'delete', "bookshelves/#{bookshelf.id}", method: :delete %></small></p>
        <small><%= bookshelf.description %></small>
        </li>
        </ul>
        <% end %>
      <% end %>
      <%= link_to 'Back to books', books_path %>
    </div>
  </div>
</div>


